<!--login.html-->
<!doctype html>
<!--
* Tabler - Premium and Open Source dashboard template with responsive and high quality UI.
* @version 1.0.0-beta2
* @link https://tabler.io
* Copyright 2018-2021 The Tabler Authors
* Copyright 2018-2021 codecalm.net Paweł Kuna
* Licensed under MIT (https://github.com/tabler/tabler/blob/master/LICENSE)
-->
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>RUTA-TEC Visualiza tu ruta, visualiza tu destino</title>
    <!-- CSS files -->
    <link href="/dist/css/tabler.min.css" rel="stylesheet"/>
    <link href="/dist/iconfont/tabler-icons.min.css" rel="stylesheet" >
    <!-- <link href="/dist/libs/bootstrap-table/all.css" rel="stylesheet" /> -->

    <style>
      #empresa * { color: rgb(238, 59, 46); }
      #app * { color: darkcyan; }
    </style>
  </head>
  <body class="antialiased border-top-wide border-primary d-flex flex-column">
    <div class="page page-center">
      <div class="container-tight py-4">
        
        <form id="createform" name="main-form" class="bg-white shadow p-3 rounded-3 needs-validation" autocomplete="off" novalidate>
          <div class="card-body">
            <div class="text-center mb-2" id="empresa">
                <!-- <img src="/static/logoutselva.png" width="140" height="42" alt="logoutselva" class=""> -->
                <img src="sites.png" width="140" height="140">
            </div>
            <div class="hr-text" id="app">
              <h2>Registrarte a RUTATEC</h2>
            </div>
              <div class="">
                <center>
                  <h3>Visualiza tu ruta, visualiza tu destino</h3>
                </center>
              </div>
            <div class="mb-3 form-group">
              <label class="form-label">Nombre</label>
              <div class="input-icon mb-3">
                <span class="input-icon-addon">
                  <i class="ti ti-user"></i>
                </span>
                <input type="text" id="name" name="nombre" class="form-control" value=""  placeholder="Capture su Nombre" pattern="[A-Za-z0-9ÁÉÍÓÚáéíóúñÑÜü^,^.\s]{3,100}" required/>
                <div class="invalid-feedback">Ingrese su Nombre sin caracteres especiales. ( ), [ ], { }...</div>
              </div>   
            </div>


            <div class="mb-3 form-group">
                <label class="form-label">Apellido</label>
                <div class="input-icon mb-3">
                  <span class="input-icon-addon">
                    <i class="ti ti-user"></i>
                  </span>
                  <input type="text" id="Apellido" name="apellidos" class="form-control" value="" minlength="3" placeholder="Capture su Apellido " pattern="[A-Za-z0-9ÁÉÍÓÚáéíóúñÑÜü^,^.\s]{3,100}" required/>
                  <div class="invalid-feedback">Ingrese su Apellido sin caracteres especiales. ( ), [ ], { }...</div>
                </div>   
              </div>

              <div class="mb-3 form-group">
                <label class="form-label">Cuenta</label>
                <div class="input-icon mb-3">
                  <span class="input-icon-addon">
                    <i class="ti ti-mail"></i>
                  </span>
                  <input type="email" id="username" name="correo" class="form-control" value=""  placeholder="Capture su cuenta" required/>
                  <div class="invalid-feedback">Ingresa un correo, ej: example@gmail.com</div>
                </div>   
              </div>
              
            <div class="mb-3 form-group">
              <label class="form-label">Password</label>
              <div class="row">
                <div class="col">
                  <div class="input-icon">
                    <span class="input-icon-addon">
                      <i class="ti ti-lock"></i>
                    </span>
                    <input type="password" id="password" name="contra" value="" class="form-control"  minlength="3" placeholder="Capture su Password" required/>
                    <div class="invalid-feedback">Se deben de introducir mínimo 3 caracteres y sin caracteres especiales</div>
                  </div>
                </div>
                <div class="col-auto">
                  <span class="input-group-text btn-show-pass bg-white">
                    <a style="text-decoration: none;" onclick="passwordShowHidde('password')" href="#" class="link-secondary"
                      title="Show password" data-bs-toggle="tooltip">
                      <i id="password-eye" class="ti ti-eye"></i>
                    </a>
                  </span>
                </div>
              </div>              
            </div>
            <input id="Aprivac" type="checkbox" >
            <div class="mb-2">
              
              <span class="form-label-description" data-bs-toggle="modal" data-bs-target="#aviso">
                <a href="#">Aviso de privacidad</a>
              </span>
            </div>
            <div class="form-footer">
              <div id="smsInvali"></div>
              <button type="submit" id="btnAddCuenta" class="btn btn-success w-100 mb-2">Registrate</button>
              <button type="button" id="btniniciar" class="btn btn-light w-100">Iniciar Sesión</button>
            </div>
          </div>
        </form>
      </div>
    </div>
    <div class="modal fade modal-fade-scrollable" id="aviso" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Política de privacidad</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            
          </div>
        </div>
      </div>
    </div>
    <!-- Libs JS -->
    <!-- <script src="/dist/libs/jquery/jquery.min.js"></script> -->
    <script src="/dist/libs/bootstrap/jquery.min.js"></script>
    <script src="/dist/libs/bootstrap/popper.min.js"></script>
    <script src="/dist/libs/bootstrap/bootstrap.min.js"></script>
    <!-- Tabler Core -->
    <script src="/dist/js/tabler.min.js"></script>
    <script src="/dist/libs/sweetalert2/sweetalert2.all.min.js"></script>
    <script src="/dist/js/scripts.js"></script>
    <script src="/dist/js/login.js"></script>
    <script src="/dist/js/indexbasesidebar.js"></script>
    <script src="/dist/libs/serializejson/jquery.serializejson.js"></script>

    <script>
      $(document).ready(function(){
        // Test de apertura de popups y mensaje para activar popups
        resp = testPopupsAlertaNavegacion();
      });
      
      $("#btniniciar").click(function (e) {
        // limpiar los datos...
        if( $('#Aprivac').prop('checked') ) {
          alert('checkbox1 esta Seleccionado,');
        }

        // window.location.replace('/login');
        // showrutas();
        // console.log("crear nuevo usuario");
      });

      $("#createform").submit(function(e) {
          // preventing from page reload and default actions
          e.preventDefault();
          $("#createform").addClass("was-validated");
          formDado = "createform";
          if (!$(this)[0].checkValidity()){
              $('#' + formDado + ' .invalid-feedback').each(function () {
                  if ($(this)[0].offsetParent){
                      $(this).parent().find("select, input, textarea").first().focus();
                      return false; // exit each
                  }
              });
              return;
          }
          let referencia = "Registrar.html_createform"
          let typeSubmit = "POST";
          let url = "/api/usuario/registrar?ret={{ret}}";
          let msg = "Se agregó correctamente el usuario"
          let ret = "{{ret}}"

          if( $('#Aprivac').prop('checked') ) {
            serializedData = JSON.stringify($(this).serializeJSON());
            sendDatosToServer(referencia, url, typeSubmit, ret, serializedData).then((jqXHR) => {
                showMsg(jqXHR[0], referencia, url, ret).then((result) => {
                    if (jqXHR[0].status == 200){
                        window.location.replace('/login');
                    }
                    return true;
                });
            });
          }else{
            swal.fire({
              icon: 'warning',
              title: "Debes aceptar el aviso de privacidad para continuar",
              showConfirmButton: true
            });
          }
      });
    </script>
  </body>
</html>